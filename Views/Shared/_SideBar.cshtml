@using Syncfusion.EJ2;
@using Syncfusion.EJ2.Navigations;
@using Microsoft.AspNetCore.Identity;

@{
    Dictionary<string, object> HtmlAttribute = new Dictionary<string, object>()
    {   {"class", "sidebar-menu" } };
    List<MenuItem> MainMenuItems = new List<MenuItem>{
		new MenuItem {
			Text="General",
			Separator=true
		},
		new MenuItem {
			Text="Dashborad",
			Url = "/",
			IconCss="fa-solid fa-box"
		},
		new MenuItem {
			Text="Categories",
			Url = "/Category",
			IconCss="fa-solid fa-folder-closed"
		},
		new MenuItem {
			Text="Transactions",
			Url = "/Transaction",
			IconCss="fa-solid fa-arrow-right-arrow-left"
		},

        new MenuItem {
            Text = "Notification",
            IconCss = "fa-solid fa-bell",
			Url="#"
        },
		new MenuItem {
				Text = "User",
				IconCss = "fa-solid fa-user",
				Items = User.Identity.IsAuthenticated ? 
				new List<MenuItem> { // If user is authenticated
					new MenuItem{ Text = "Profile", Url="/Profile" },
					new MenuItem{ Text = "Sign Out"}
				} :
				new List<MenuItem> { // If user is not authenticated
					new MenuItem{ Text = "Sign In", Url="/Account/Login" }
				}
			},
        new MenuItem {
            Text = "Settings",
            IconCss = "fa-solid fa-eye",
            Items = new List<MenuItem> {
                new MenuItem{ Text = "Change Profile" },
                new MenuItem{ Text = "Add Details" }
            }
        },
    };
}



<ejs-sidebar id="sidebar" width="290px" enableDock="true" dockSize="50px">
	<e-content-template>
		<ejs-menu id="menu" 
				items="MainMenuItems"
				orientation="Vertical"
				select="onMenuSelect"
				></ejs-menu>
	</e-content-template>
</ejs-sidebar>

@Html.AntiForgeryToken()
<script>
    window.onMenuSelect = function(args) {
        if (args.item.text === "Sign Out") {
            $.ajax({
                url: '/Account/SignOut',
                type: 'POST',
				headers: { 'RequestVerificationToken': $('input[name="__RequestVerificationToken"]').val() },
                success: function(result) {
                    // Handle successful logout, maybe redirect to a different page
					location.reload();
                }
            });
        }
    }
</script>
